<!DOCTYPE html><!--ov5_3vvdz_ZjGRnxAjMVm--><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/e247df55a46cccb0.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-2b20d33215e8bd87.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-62387c181da8cbd1.js" async=""></script><script src="/_next/static/chunks/main-app-bdfa2d0147b81ca8.js" async=""></script>
<script src="/_next/static/chunks/app/create/page-b0c8edde5a0c4a79.js" async=""></script><script src="/_next/static/chunks/bc9e92e6-f0d0e49aefe1455c.js" async=""></script><script src="/_next/static/chunks/69806262-745e53522b50c3e6.js" async=""></script><script src="/_next/static/chunks/132-56e2c5b6e1b6454b.js" async=""></script><script src="/_next/static/chunks/app/create/page-b0c8edde5a0c4a79.js" async=""></script><title>ScoreFlow - 大会進行状況リアルタイム発信</title><meta name="description" content="トーナメント表をリアルタイムで更新・共有"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><div class="min-h-screen flex items-center justify-center bg-white"><div class="text-gray-600">読み込み中...</div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-2b20d33215e8bd87.js" id="_R_" async=""></script>
<script>(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{606:(e,t,a)=>{"use strict";a.d(t,{BY:()=>u,Lw:()=>m,OU:()=>d,Po:()=>p,RA:()=>x,UG:()=>l,YT:()=>c,qM:()=>o});var r=a(4927),s=a(8584);let n="tournaments",i="marks",l=async(e,t,a)=>{let i,l={name:e,createdBy:a,createdAt:(0,r.O5)(),expiresAt:((i=new Date).setMonth(i.getMonth()+2),r.Dc.fromDate(i)),publicUrlId:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),pdfPageImage:t};return(await (0,r.gS)((0,r.rJ)(s.db,n),l)).id},d=async e=>{let t=(0,r.H9)(s.db,n,e),a=await (0,r.x7)(t);return a.exists()?{id:a.id,...a.data()}:null},c=async e=>{let t=(0,r.P)((0,r.rJ)(s.db,n),(0,r._M)("publicUrlId","==",e)),a=await (0,r.GG)(t);if(a.empty)return null;let i=a.docs[0];return{id:i.id,...i.data()}},o=async e=>{let t=(0,r.P)((0,r.rJ)(s.db,n),(0,r._M)("createdBy","==",e));return(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},u=async(e,t)=>{let a={...t,createdAt:(0,r.O5)()};return(await (0,r.gS)((0,r.rJ)(s.db,n,e,i),a)).id},m=async(e,t)=>{let a=(0,r.H9)(s.db,n,e,i,t);await (0,r.kd)(a)},x=async(e,t,a)=>{let l=(0,r.H9)(s.db,n,e,i,t);await (0,r.mZ)(l,a)},p=(e,t)=>{let a=(0,r.rJ)(s.db,n,e,i);return(0,r.aQ)(a,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})))})}},2452:(e,t,a)=>{"use strict";a.d(t,{CI:()=>l,G6:()=>i,j2:()=>s.j});var r=a(5140),s=a(8584);let n=new r.HF,i=async()=>(await (0,r.df)(s.j,n)).user,l=async()=>{await (0,r.CI)(s.j)}},8324:(e,t,a)=>{Promise.resolve().then(a.bind(a,9416))},8584:(e,t,a)=>{"use strict";let r,s,n;a.d(t,{db:()=>n,j:()=>s});var i=a(7873),l=a(5140),d=a(4927);r=(0,i.Dk)().length?(0,i.Dk)()[0]:(0,i.Wp)({apiKey:"AIzaSyD9RAsnCEeiJzyFvdqlw9X-PJrRghBi7ro",authDomain:"scoreflow-85a3e.firebaseapp.com",projectId:"scoreflow-85a3e",messagingSenderId:"1081634020590",appId:"1:1081634020590:web:db1d310872632461e767ff"}),s=(0,l.xI)(r),n=(0,d.aU)(r)},9416:(e,t,a)=>{"use strict";a.d(t,{CreateTournamentClient:()=>u});var r=a(5155),s=a(2115),n=a(3321),i=a(17),l=a(2452),d=a(606),c=a(6898);c.EA.workerSrc="/pdf.worker.min.js";let o=async(e,t=2.5)=>{let a=await e.arrayBuffer(),r=await c.YE({data:a}).promise,s=await r.getPage(1),n=s.getViewport({scale:t}),i=document.createElement("canvas"),l=i.getContext("2d");if(!l)throw Error("Canvas context not available");return i.height=n.height,i.width=n.width,await s.render({canvasContext:l,viewport:n}).promise,i.toDataURL("image/png",.85)};function u(){let e=(0,n.useRouter)(),[t,a]=(0,i.hD)(l.j2),[c,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null);if((0,s.useEffect)(()=>{a||t||e.push("/")},[t,a,e]),a)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-lg",children:"読み込み中..."})});if(!t)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-lg",children:"リダイレクト中..."})});let f=async a=>{if(a.preventDefault(),!c.trim())return void g("大会名を入力してください");if(!m)return void g("PDFファイルを選択してください");h(!0),g(null);try{let a=await o(m,2.5),r=await (0,d.UG)(c,a,t.uid);e.push(`/tournament/${r}`)}catch(e){console.error("Error creating tournament:",e),g("大会の作成に失敗しました"),h(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"ScoreFlow"}),(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"text-sm text-gray-600 hover:text-gray-900",children:"戻る"})]})})}),(0,r.jsx)("main",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"新規大会作成"}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"大会名"}),(0,r.jsx)("input",{id:"name",type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"例: 2024年春季大会",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"pdf",className:"block text-sm font-medium text-gray-700 mb-2",children:"PDFファイル（1ページのみ）"}),(0,r.jsx)("input",{id:"pdf",type:"file",accept:"application/pdf",onChange:e=>{let t=e.target.files?.[0];t&&"application/pdf"===t.type?(x(t),g(null)):g("PDFファイルを選択してください")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),m&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["選択中: ",m.name]})]}),b&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",disabled:p,children:"キャンセル"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition disabled:opacity-50",disabled:p,children:p?"作成中...":"作成"})]})]})]})})]})}}},e=>{e.O(0,[992,416,84,132,17,441,794,358],()=>e(e.s=8324)),_N_E=e.O()}]);</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7121,[],\"\"]\n3:I[4581,[],\"\"]\n4:I[1304,[],\"ClientPageRoot\"]\n5:I[6919,[\"992\",\"static/chunks/bc9e92e6-f0d0e49aefe1455c.js\",\"416\",\"static/chunks/69806262-745e53522b50c3e6.js\",\"132\",\"static/chunks/132-56e2c5b6e1b6454b.js\",\"323\",\"static/chunks/app/create/page-b0c8edde5a0c4a79.js\"],\"default\"]\n8:I[484,[],\"OutletBoundary\"]\n9:\"$Sreact.suspense\"\nb:I[484,[],\"ViewportBoundary\"]\nd:I[484,[],\"MetadataBoundary\"]\nf:I[7123,[],\"\"]\n:HL[\"/_next/static/css/e247df55a46cccb0.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"ov5_3vvdz_ZjGRnxAjMVm\",\"c\":[\"\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e247df55a46cccb0.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ja\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L4\",null,{\"Component\":\"$5\",\"serverProvidedParams\":{\"searchParams\":{},\"params\":{},\"promises\":[\"$@6\",\"$@7\"]}}],null,[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@a\"}]}]]}],{},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$Lb\",null,{\"children\":\"$@c\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@e\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"6:{}\n7:\"$0:f:0:1:1:children:0:props:children:0:props:serverProvidedParams:params\"\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"title\",\"0\",{\"children\":\"ScoreFlow - 大会進行状況リアルタイム発信\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"トーナメント表をリアルタイムで更新・共有\"}]]\na:null\n"])</script></body></html>